@use '../utils';

.str-chat {
  --str-chat__attachment-list-font-family: var(--str-chat__font-family);
  --str-chat__attachment-list-border-radius: 0;
  --str-chat__attachment-list-color: var(--str-chat__text-color);
  --str-chat__attachment-list-background-color: transparent;
  --str-chat__attachment-list-border-block-start: none;
  --str-chat__attachment-list-border-block-end: none;
  --str-chat__attachment-list-border-inline-start: none;
  --str-chat__attachment-list-border-inline-end: none;
  --str-chat__attachment-list-box-shadow: none;

  --str-chat__image-attachment-font-family: var(--str-chat__font-family);
  --str-chat__image-attachment-border-radius: calc(var(--str-chat__message-bubble-border-radius) - var(--str-chat__attachment-margin));
  --str-chat__image-attachment-color: var(--str-chat__text-color);
  --str-chat__image-attachment-background-color: transparent;
  --str-chat__image-attachment-border-block-start: none;
  --str-chat__image-attachment-border-block-end: none;
  --str-chat__image-attachment-border-inline-start: none;
  --str-chat__image-attachment-border-inline-end: none;
  --str-chat__image-attachment-box-shadow: none;

  --str-chat__image-gallery-attachment-font-family: var(--str-chat__font-family);
  --str-chat__image-gallery-attachment-border-radius: calc(var(--str-chat__message-bubble-border-radius) - var(--str-chat__attachment-margin));
  --str-chat__image-gallery-attachment-color: var(--str-chat__text-color);
  --str-chat__image-gallery-attachment-background-color: transparent;
  --str-chat__image-gallery-attachment-border-block-start: none;
  --str-chat__image-gallery-attachment-border-block-end: none;
  --str-chat__image-gallery-attachment-border-inline-start: none;
  --str-chat__image-gallery-attachment-border-inline-end: none;
  --str-chat__image-gallery-attachment-box-shadow: none;
  --str-chat__image-gallery-attachment-overlay: var(--str-chat__secondary-overlay);
  --str-chat__image-gallery-attachment-overlay-text-color: var(--str-chat__secondary-overlay-text-color);

  --str-chat__card-attachment-font-family: var(--str-chat__font-family);
  --str-chat__card-attachment-border-radius: 0;
  --str-chat__card-attachment-color: var(--str-chat__text-color);
  --str-chat__card-attachment-link-color: var(--str-chat__primary-color);
  --str-chat__card-attachment-background-color: transparent;
  --str-chat__card-attachment-border-block-start: none;
  --str-chat__card-attachment-border-block-end: none;
  --str-chat__card-attachment-border-inline-start: none;
  --str-chat__card-attachment-border-inline-end: none;
  --str-chat__card-attachment-box-shadow: none;

  --str-chat__card-caption-font-family: var(--str-chat__font-family);
  --str-chat__card-caption-border-radius: 0 15px 0 0;
  --str-chat__card-caption-color: var(--str-chat__text-color);
  --str-chat__card-caption-link-color: var(--str-chat__primary-color);
  --str-chat__card-caption-background-color: var(--str-chat__message-bubble-background-color);
  --str-chat__own-card-caption-background-color: var(--str-chat__own-message-bubble-background-color);
  --str-chat__card-caption-border-block-start: none;
  --str-chat__card-caption-border-block-end: none;
  --str-chat__card-caption-border-inline-start: none;
  --str-chat__card-caption-border-inline-end: none;
  --str-chat__card-caption-box-shadow: none;

  --str-chat__file-attachment-font-family: var(--str-chat__font-family);
  --str-chat__file-attachment-border-radius: calc(var(--str-chat__message-bubble-border-radius) - var(--str-chat__attachment-margin));
  --str-chat__file-attachment-color: var(--str-chat__text-color);
  --str-chat__file-attachment-secondary-color: var(--str-chat__text-low-emphasis-color);
  --str-chat__file-attachment-background-color: var(--str-chat__secondary-background-color);
  --str-chat__file-attachment-border-block-start: none;
  --str-chat__file-attachment-border-block-end: none;
  --str-chat__file-attachment-border-inline-start: none;
  --str-chat__file-attachment-border-inline-end: none;
  --str-chat__file-attachment-box-shadow: none;

  --str-chat__audio-attachment-widget-font-family: var(--str-chat__font-family);
  --str-chat__audio-attachment-widget-border-radius: calc(var(--str-chat__message-bubble-border-radius) - var(--str-chat__attachment-margin));
  --str-chat__audio-attachment-widget-color: var(--str-chat__text-color);
  --str-chat__audio-attachment-widget-secondary-color: var(--str-chat__text-low-emphasis-color);
  --str-chat__audio-attachment-widget-background-color: var(--str-chat__secondary-background-color);
  --str-chat__audio-attachment-widget-border-block-start: none;
  --str-chat__audio-attachment-widget-border-block-end: none;
  --str-chat__audio-attachment-widget-border-inline-start: none;
  --str-chat__audio-attachment-widget-border-inline-end: none;
  --str-chat__audio-attachment-widget-box-shadow: none;

  --str-chat__audio-attachment-controls-button-border-radius: var(--str-chat__border-radius-circle);
  --str-chat__audio-attachment-controls-button-color: var(--str-chat__text-color);
  --str-chat__audio-attachment-controls-button-background-color: var(--str-chat__secondary-background-color);
  --str-chat__audio-attachment-controls-button-pressed-background-color: var(--str-chat__surface-color);
  --str-chat__audio-attachment-controls-button-border-block-start: none;
  --str-chat__audio-attachment-controls-button-border-block-end: none;
  --str-chat__audio-attachment-controls-button-border-inline-start: none;
  --str-chat__audio-attachment-controls-button-border-inline-end: none;
  --str-chat__audio-attachment-controls-button-box-shadow: var(--str-chat__circle-fab-box-shadow);

  --str-chat__attachment-actions-font-family: var(--str-chat__font-family);
  --str-chat__attachment-actions-border-radius: 0;
  --str-chat__attachment-actions-color: var(--str-chat__text-color);
  --str-chat__attachment-actions-background-color: transparent;
  --str-chat__attachment-actions-border-block-start: none;
  --str-chat__attachment-actions-border-block-end: none;
  --str-chat__attachment-actions-border-inline-start: none;
  --str-chat__attachment-actions-border-inline-end: none;
  --str-chat__attachment-actions-box-shadow: none;

  --str-chat__attachment-action-font-family: var(--str-chat__font-family);
  --str-chat__attachment-action-border-radius: 0;
  --str-chat__attachment-action-color: var(--str-chat__text-low-emphasis-color);
  --str-chat__attachment-action-background-color: var(--str-chat__secondary-background-color);
  --str-chat__attachment-action-border-block-start: var(--str-chat__surface-color) 1px solid;
  --str-chat__attachment-action-border-block-end: var(--str-chat__surface-color) 1px solid;
  --str-chat__attachment-action-border-inline-start: var(--str-chat__surface-color) 1px solid;
  --str-chat__attachment-action-border-inline-end: var(--str-chat__surface-color) 1px solid;
  --str-chat__attachment-action-box-shadow: none;
  --str-chat__attachment-action-active-color: var(--str-chat__primary-color);
}

.str-chat__attachment-list {
  @include utils.component-layer-overrides('attachment-list');

  .str-chat__message-attachment--image,
  .str-chat__message-attachment-card--header {
    img,
    iframe {
      @include utils.component-layer-overrides('image-attachment');
    }
  }

  .str-chat__message-attachment--video {
    video {
      @include utils.component-layer-overrides('image-attachment');
    }
  }

  .str-chat__gallery {
    @include utils.component-layer-overrides('image-gallery-attachment');

    .str-chat__gallery-image {
      background-color: transparent;
      border: 0;
    }

    .str-chat__gallery-placeholder {
      color: var(--str-chat__image-gallery-attachment-overlay-text-color);
      display: flex;
      border: none;
      font-size: 1.8rem;
      line-height: 1.8rem;

      &::after {
        background-color: var(--str-chat__image-gallery-attachment-overlay);
      }
    }
  }

  .str-chat__message-attachment-file--item {
    @include utils.component-layer-overrides('file-attachment');
  }

  .str-chat__message-attachment-file--item,
  .str-chat__message-attachment-audio-widget {
    .str-chat__message-attachment-file--item-name,
    .str-chat__message-attachment-audio-widget--title {
      font-size: 1rem;
      line-height: 1.25rem;
      font-weight: 500;
    }

    .str-chat__message-attachment-file--item-size {
      color: var(--str-chat__file-attachment-secondary-color);
      font-size: 0.875rem;
      line-height: 1rem;
    }

    .str-chat__message-attachment-download-icon {
      svg path {
        fill: var(--str-chat__file-attachment-color);
      }
    }
  }

  .str-chat__message-attachment-audio-widget {
    @include utils.component-layer-overrides('audio-attachment-widget');
  }

  .str-chat__message-attachment-audio-widget--progress-track {
    background-color: var(--str-chat__disabled-color);

    .str-chat__message-attachment-audio-widget--progress-indicator {
      background-color: var(--str-chat__primary-color);
    }
  }

  .str-chat__message-attachment-audio-widget--play-button {
    @include utils.component-layer-overrides('audio-attachment-controls-button');
    @include utils.circle-fab-overrides('audio-attachment-controls-button');
  }

  .str-chat__message-attachment--card {
    @include utils.component-layer-overrides('card-attachment');
    font-size: 0.875rem;
    line-height: 1rem;

    .str-chat__message-attachment-card--caption {
      @include utils.component-layer-overrides('card-caption');
    }

    .str-chat__message-attachment-card--title {
      font-weight: 500;
    }
  }

  .str-chat__message-attachment-card--audio {
    img {
      border-bottom-left-radius: 0;
      border-bottom-right-radius: 0;
    }

    .str-chat__message-attachment-card--header {
      .str-chat__message-attachment-card--caption {
        background-color: var(--str-chat__audio-attachment-widget-background-color);
      }
    }

    .str-chat__message-attachment-card-audio-widget {
      background-color: var(--str-chat__audio-attachment-widget-background-color);
      border-radius: 0 0 14px 14px;

      .str-chat__message-attachment-audio-widget--title {
        color: var(--str-chat__text-color);
        font-weight: 500;
        font-size: 14px;
        line-height: 16px;
      }
    }
  }

  .str-chat__message-attachment-actions {
    @include utils.component-layer-overrides('attachment-actions');

    .str-chat__message-attachment-actions-button {
      @include utils.component-layer-overrides('attachment-action');
      font-weight: 500;
      font-size: 1rem;
      line-height: 1.25rem;
      border-collapse: collapse;

      &:active {
        color: var(--str-chat__attachment-action-active-color);
      }

      &:not(:last-of-type) {
        border-inline-end: none;
      }
    }
  }

  .str-chat__message-attachment-with-actions.str-chat__message-attachment--giphy {
    img {
      border-end-start-radius: 0;
      border-end-end-radius: 0;
    }
  }
}

.str-chat__message--me {
  .str-chat__message-attachment--card {
    .str-chat__message-attachment-card--caption {
      background-color: var(--str-chat__own-card-caption-background-color);
    }
  }
}
